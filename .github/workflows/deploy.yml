name: Deploy Shopify Theme
on:
  push:
    branches:
      - main
jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '14'

    - name: Install Shopify CLI
      run: npm install -g @shopify/cli @shopify/theme

    - name: Authenticate Shopify CLI
      env:
          SHOPIFY_APP_API_PASSWORD: ${{ secrets.SHOPIFY_APP_API_PASSWORD }}
          SHOPIFY_STORE_URL: ${{ secrets.SHOPIFY_STORE_URL }}
          SHOPIFY_THEME_ID: ${{ secrets.SHOPIFY_THEME_ID }}
          THEME_PATH: ${{ secrets.SHOPIFY_THEME_PATH }}
          THEMEKIT_FLAGS: --ignored-file=config/settings_data.json --ignored-file=locales/*
          run: |
             shopify theme push --store https://8b47fd-7d.myshopify.com --theme 136506867863
